$(function(e){var i,j,l,c,d,f,r,m,a,k;var p=50,q=30;var h={opacity:0.5,stroke:"#a60000","stroke-width":5,"stroke-dasharray":"-"};var n={opacity:0.5,stroke:"#a60000","stroke-width":1,fill:"#a60000"};var s=false;function o(){if(!s){s=true;var u=e(this).offset().left-e(window).scrollLeft();var A=e(this).offset().top-e(window).scrollTop();var v=u-10;var t=A+e(this).height()*3/2;var y=e(window).width()/6,x=0;var w=v-y;var z=t-x;e("#paper").toggleClass("hide",false).css({position:"fixed",width:w,heigth:z,top:x,left:y});c=0;r=q;j="M"+w+" "+(z-7)+"Q20 "+z+" 20 15";i=Raphael(document.getElementById("paper"),w,z);l=i.path(j);l.hide();d=l.getTotalLength();f=d/p;setTimeout(b,r)}}function b(){if(s){c+=f;if(c>d){c=d}a=i.path(l.getSubpath(0,c)).attr(h);if(m){m.remove()}m=a;if(c<d){r=q-(q/2)*(c/d);setTimeout(b,r)}else{k=i.path("M10 15 L30 15 L20 5 L10 15").attr(n);s=false}}}function g(){s=false;e("#paper").toggleClass("hide",true);if(a){a.remove();a=null}if(m){m.remove();a=null}if(l){l.remove();l=null}if(k){k.remove();k=null}i=null}e("#bookmarklet").mouseenter(o).mouseleave(g);e(window).scroll(g);e("#feedback-tab").click(function(){e("#feedback-form").toggle("slide").find("form").attr("action","/feedback")});e("#feedback-form form").on("submit",function(u){var t=e(this);e.ajax({type:t.attr("method"),url:t.attr("action"),data:t.serialize(),success:function(){e("#feedback-form").toggle("slide").find("textarea").val("")}});u.preventDefault()})});